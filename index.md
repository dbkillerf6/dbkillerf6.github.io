# 2019 黑夜行走
2019 年有了很多重要的改变，也做了不少关键的决定，也许几年以后回头再看，这会是与众不同的一年吧。一切都像一个转折点，经历拐点的时候，也难免走入黑夜。说实话，这也该应该是毕业两年多里，精神和身体最饱受折磨的一年了。

## 👨🏻‍💻 工作相关
把工作放在第一个说，主要也是因为，这一年下来，工作填满了我大多数的时间。尤其是到了阿里之后，虽然一切都没有太大问题，但总有一些无形的压力，推着自己往前走，很难做到自我满足。

### 1. VIPKID
说实话，在 18 年底就有了离开的打算。当时团队拆开了，为了当时看来更好的职业发展，文河把我们带到了蜂校。从当时来看，这个业务也确实很受重视，由于当时手上还有几个项目，几乎所有的 CI/CD 业务、前端打点业务，都会来第一时间都会找到我（对的，第一时间不是看文档），很多时候必须 24 小时待命，就没有直接进入蜂校的业务团队做开发，加上我自己的性格所致，发现越来越找不清自己的定位，于是第一次提了离职。
当时看了一些机会，也比较喜欢像 🐵猿辅导 一类的公司，但后面因为一些原因没有成行，就选择了换一个团队试试看。抛开工作不谈，当时到运维组和洋哥搭档搞发布平台，是我这一年来最惬意的日子，也许是都喜欢美食美酒，也许是他能给我带来一些没见过的东西。

但工作毕竟是工作，在公司羸弱的基础设施和唯 KPI 论的大背景下，一切推进都举步维艰，即使 Q1 拿到了季度之星和不错的绩效，升职加薪也都安排上了，但依然觉得这样的结果没有办法说服自己，出于一种成长的焦虑，4 月底的时候还是决定离开了。
当时只是知道 VIPKID 的财务状况不是很好，最终的走向和我的预料的差不多，但离开仅仅是出于对自己成长的不满足。我也一直觉得，如果当初不是文河把我招进去，可能我现在不会学到这么多吧。
### 2. 大公司 or 创业公司
很多刚毕业的同学都会有这样的纠结，我究竟是要去一个头部公司，还是在创业公司打怪升级。并没有绝对的对错，只是对于我来说，可能更倾向于有一定规模的公司，所以把当时手上的 offer 一筛，就在 阿里 和 字节跳动 之间纠结了，这确实是个很难的决定。

平心而论，从面试过程来看，字节跳动考察的无论是深度还是广度，都让人觉得面试官真的有两把刷子；阿里这边大概是我运气比较好，感觉一切来得太简单，有种不真实的感觉。在这个时间点，我也基本就选择字节跳动了。

但后来和 walker 的交流让我觉得这个老板人挺好，好像跟着他也不错，加上猎头姐姐一直劝我，最后就接了阿里的 offer，一直到现在为止也觉得字节跳动是一家很 nice 的公司。
之前朋友也问过我，你为啥来阿里？我说：我觉得老板还不错就来了。
### 3. 阿里巴巴
我是六月的第一个工作日入职的，说实话这半年多融入阿里挺痛苦的，很多时候心累远大于身累。这并不是在否定阿里，相反，阿里是一家很棒的公司，基于员工的自由度、资源以及培养方式都非常好。只是在这样的团体里，你必须是一个有自己影响力且心理强大的人。没有人会因为你是个 P6 就觉得你做不到 P7 的事情，只要你有足够的自驱力你就可以快速地成长。

评论自己的工作状态，我更愿意把范围缩小在自己的团队，毕竟像阿里这样一家有着十几万人的公司，不同的团队不同的老板，可能决定了不同的工作体验。前面说到过，我觉得老板人不错所以来了，到现在我也依然这么认为。在身边，不同的团队尽管有着合作，但由于严谨的排兵布阵和团队层级，一年下来跨团队的了解并不多。做年度规划的时候也基本是老板给一个大方向，执行者拥有着很大的自由，加上单兵能力很强，很多事情可以遍地开花，但刚开始我做事总喜欢铺得很大，不知不觉就会钻进一些对于结果无足轻重的细节，走了不少弯路。

要说有没有成长，答案是肯定的。在阿里的这半年让我对「技术能力」四个字有了不一样的认知：以前我总会陷入一个怪圈，觉得造轮子才是有技术含量的事，但那些轮子没有解决实际的痛点于是没人用，没人用又导致了自信心受挫陷入自我怀疑。但技术实际上是存在于每个角落的，深入地了解业务挖掘痛点，再以之为抓手产出技术解决方案，这才是货真的「技术能力」。

毕竟，技术的价值，是来源于它对人们生活的改变。
## 🔧 技术相关
毕竟是个程序员，还是要说说技术方面的事。

工作相关和兴趣使然，这一年的关注点几乎都聚焦在 微前端 和 Serverless，一千个人眼中有一千个哈姆雷特，显然这两门技术目前都处于一个百花齐放的阶段，大家都在做，也基于自己的业务有了一些落地，但还没有一个统一的标准。

单拎出来，这都是一个不小的事情，就像不是你用了 qiankun 或者 single-spa，你就实现了微前端，这从来都不是一个 lib 而是一个 framework。换句话说，现在主流的微前端实现方式，都是一种「类 CSR」的思路：
- **节点挂载**：通过类似 single-spa 的方式，根据 子应用 bundle 动态地操作 DOM 节点；
- **运行时沙箱**：基于 window 快照或是基于 web-worker 做上下文隔离，再通过 hijackers 拦截事件的注册和卸载，也可以往里面插监控打点；
- **样式隔离**：基于 shadow dom 或者 postcss 加前缀做强隔离（antd 的全局组件需要挂载到局部），或是在子应用生命周期里动态注册和销毁样式表，使用 css module 加哈希（不同版本 UI 组件库隔离是个问题）；
- **数据通信**：动态数据基于 custom event 封装 发布/订阅 协议，静态数据父子传值即可；
- **公共依赖处理**：基于 webpack external 或者 import-maps 标记公共依赖，解决重复加载；
- **CI/CD**：子应用带版本号独立打包（umd）发布到 CDN，主应用作为一个轻量 loader 单独部署（CDN + Gateway 或者 BFF 看具体需求）；
- **版本控制**：这个方法比较多，但几乎都是将子应用注册配置做成动态服务，通过控制服务返回的 entry 来对子应用做版本控制。

总的来说，对于绝大多数的中后台业务（尤其是控制台），这套框架已经足够用了，并且在实现成本上也不是很高：基础内核、注册中心 以及 主应用和子应用脚手架。基于这套框架，我们可以轻松地完成巨石项目的解构、治理，并且可以实现当初 web-component 吹的牛逼 -- 技术栈无关。

对于业务开发来说，只需要写业务代码集成进去就可以 run 起来，并且通过类似 xSwitch 的 Chrome 插件劫持子应用入口文件，我们在本地就可以对线上问题 debug，并且不会触发安全问题。再进一步来看，我们还可以通过这种方式，基于一套开发环境，进行多人协同开发，是不是有点像云开发了？

但当我们还想更进一步时，会发现，这种架构有着天生的局限性：
#### 1.1 服务被迫兼容
由于我们的微前端是一种「类 CSR」的思路，那么所有的「Micro」就都是基于浏览器，也就是说，在一个页面里，无论你有多少个子应用，你的服务出口只能有一个域名（不跨域），在一些没有通用网关的团队里，服务的适配和兼容是一个比较头疼的问题，尤其是旧项目迁移。

#### 1.2 SEO 不友好
和所有 CSR 一样的，由于是通过 js 动态渲染节点，因此在 SEO 方面有着天然的劣势。
#### 1.3 商业价值模糊
前面有提到微前端解决了一些问题，但我们可以看到，那些基本上都是工程问题，商业价值并不明显：
- **小企业**：我的开发都是前后端一把梭，项目可能一段时间也就没了，你让我搭这么多基础服务干嘛？
- **中大厂**：可以解决部分中后台项目的提效问题，但我也想把它拿来卖给中小企业，怎么搞？

从这个角度看，那我还不如拥抱「类小程序」体系（现在好像有点流量的公司都在搞 aPaas）。

因此，在「破局」的思考上，明年实现业务需求的前提下，也还应该多思考「微前端」和「Serverless」结合，通过组件即服务（CaaS），来赋能更多场景。

**BTW，越来越觉得，现在的 ☁️已经不是当年的 ☁️了，或者说 ☁️业务越来越集中在流量头部了，换句话说，只要你做到的行业的顶端，那你的业务就有 ☁️化的可能，反之你可能被取代。举个 🌰，头条是短视频业务的头部企业，如果你是创作者，它对你开放一堆创作者专业的 ☁️业务（包括但不限于新媒体办公、视频剪辑、渠道投放、图文编辑等），你是会选择它还是传统的付费软件呢？如果它的大多数功能都选择按量免费呢？**

哎，去中心化道阻且长呀！

## 🏖️ 生活相关
生活方面说实在的，很多时候是没有的，尤其是在今年这个节点，从离职到入职再到落地，整个过程并不轻松。在北京，你可以认识全世界，全世界也可以不认识你。自我调节和解压在这种环境下，就显得比较重要了。

我的生活可能和年龄并不相符，平时基本就在家看看书，写写文档，追追剧，打打游戏，认识小徐以后，还偶尔会出门看看展，吃吃好吃的。

我觉得发呆和闲逛都是放松自己的方式，毕竟我的生活可能太紧绷了，无论是不是在工作，脑子里都会一直想一些事情，有时梦里还会在想这个 API 是不是这么设计会更好，这也就导致了我的睡眠很轻，第二天的疲劳度又很高。偶尔也会和朋友一起开黑，段位和炸鱼塘比起来，显然后者使我快乐，大概是累多了之后也没啥追求了吧。
### 1. 看书
这一年确实看了不少书，技术书和闲书加起来应该差不多 30 本了，也算是完成了去年的 KPI？

特别喜欢 杨绛先生 的书，无论是 **《走到人生边上》** 还是 **《我们仨》**，并没有特别大的格局，但与我来说，这种平平淡淡、无阴无晴的叙事，能让我的内心也从浮躁里安静下来。

后面无论是看 **《人类简史》**、**《冬泳》**、**《大江大河》**、**《百年孤独》**，还是重读《围城》，有的读起来热血沸腾，有的读起来黯然神伤，但总的来说，大多都会感叹世事变迁，会想起从前做的梦，从前遇到的人，还有从前干的傻事，已经可以用一种很坦然地心态去看待经历过的一切了。对于各种各样的人和事，也会学着从客观角度去理解，这大概就是要 修道成仙 了吧？
### 2. 投资
说实话 2019 的行情还不错，我定投基金的平均收益也到了 31%，还是不敢碰股票，以后应该也不太会弄，毕竟时间成本太高，hold 不住。
### 3. 写作
主要还是没什么可写，尤其是技术相关的文章，之前老板还经常提醒我要写技术文，但遇到的优秀的人多了，总会陷入一种自我鄙视，很多时候写到一半觉得太 Low 便没有继续下去。

2020 应该会做一些改变，无论是博客和 Github 都会开始写东西，我觉得这也是一种心态的转变吧，到阿里的这段日子，我从以前的「和别人比」到「和同年龄段」比再到现在的「和自己比」，看到了更大的世界，也在学着平衡谦逊和自我肯定。
### 4. 消费
2019 还是没有改掉大手大脚的毛病，虽然通过理财投资也攒了一点积蓄，但回头再看，除了吃以外，很多消费实际上都可以再细化一下的。
### 5. 感情
在这个时间遇到小徐，是件很幸运的事。前面有说到我看人很准，所以很多不经意的小细节，都能感觉到她在照顾着我的情绪。从以前到现在，我觉得我就像个孩子，虽然很多时候我并不愿意承认，但在你开始成熟的时候遇到一个可以陪你长大的人，真的蛮重要的。

我一直都比较自我，虽然一直嚷嚷这要做一个温暖的人，但确实是因为她的陪伴，才让我有了对世界温暖的信心。

我俩还有一个共同的爱好--吃，但显然对于「做吃的」这件事都并不擅长，她还整天拿她爸爸给我举例，试图让我成为一个「居家的好男生」。于是我就有了人生第一次做饭给别人吃的经历，感觉还行，可以多加努力，要是做坏了我们还是出门吃日料吧。

## 🤔 三观
我的三观这一年变化不大，也可能是外部条件没有太多变化的原因吧。

对于世界的思考，更多还是抱着一种理解和敬畏的心态，世界是不可知的，我们很难从旧有印象来窥其全貌。在宇宙面前我们都太渺小了，无论是前人经验还是自身见闻，都只能当作参考，**当我们把这些当作定论的时候，就很难跳出旧有的逻辑，在这个世界发展越来越快的大背景下，很容易会陷入自身的知识牢笼**。技术推动着世界变化，人的一辈子也就短短几十年，若是不能打破边界，可能老了以后都很难理解这个世界了。同理，对于他人尤其是异于自己的人，都要试着去理解他们的文化、宗教、知识框架和三观背景，切不可一概而论。

对于人生来说，我希望可以去经历更多从前没有经历的事情，既然人生短暂，那为什么不多去经历呢？努力是件痛苦的事，而可以一直支持我们去努力下去的动力，是对经历和创造的渴望，关于这一点，我坚信不疑。

我觉得我价值的体现，一定是「把今天最好的自己当成明天最低的要求」，我希望可以珍惜那些对我好的人，并让他们感受到，因为有我，这个世界有一点点不一样了。而这一切的理由，仅仅是我开始理解，这个世界上没有人是必须对你好的，有这样的人就该珍惜。

另外，我讨厌喜欢抱怨的人，甚至我在抱怨过后，自己也想给自己两巴掌。很多时候，这是一种反智的表现，**如果一个人遇到事情第一时间想的不是怎么解决，而是抱怨社会、抱怨公司、抱怨群体，那这种人压根扛不了事情**，也就是说如果他是你的队友，遇到事了你帮他擦屁股还有可能被埋怨。

「穷则独善其身，达则兼济天下」我更喜欢这样年少轻狂的理解，希望多年以后我依然相信：**改变不了世界只是因为你还没到那个时候，在这之前，先让自己变成更好的自己。**

## ❓ 我的问题
细细总结了一下我自己的问题，希望 2020 年能慢慢优化：
- 做事情一开始容易想的太大，导致落地困难或者过度优化，做规划的时候 ROI 需要提高
- 性格冷，说白了真的不会来事儿，利益无关，仅仅是希望以后能让别人看到我更舒服一点
- 业务思考一直是我希望破局的一个点，来阿里以后有了一些进步，但还需要继续努力
- 自律不够，经常事情做着做着就疲了，导致间接性低效

## ⛳ 新年 Flag
好像这个 Flag 立得有点晚了，但还是随便写写吧：
- 陪小徐去旅游 3 次 & 演唱会 2 次
- 把微前端体系更好地落地到团队（不仅仅是现在这个样子）
- 争取一次 3.75（有点难）
- 读 20 本书
- 每周坚持健身和打篮球 🏀
- 每月至少产出一篇文章（不像这篇一样水的）
- 给爸妈做一顿饭
- 体脂率降到 10%

Peace！